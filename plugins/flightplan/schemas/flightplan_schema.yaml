schema;openaip_schema:
  type: map
  nullable: true
  mapping:
    api_key: {type: str, nullable: true}
    cache_hours: {type: int, nullable: true}

schema;auto_lifecycle_schema:
  type: map
  nullable: true
  mapping:
    activate_on_takeoff: {type: bool, nullable: true}
    complete_on_landing: {type: bool, nullable: true}
    require_departure_match: {type: bool, nullable: true}
    proximity_threshold: {type: int, nullable: true}

schema;element_schema:
  type: map
  func: is_element
  nullable: false
  mapping:
    enabled: {type: bool, nullable: true}
    status_channel: {type: any, nullable: true}
    publish_on_file: {type: bool, nullable: true}
    publish_on_activate: {type: bool, nullable: true}
    publish_on_complete: {type: bool, nullable: true}
    publish_on_cancel: {type: bool, nullable: true}
    stale_hours: {type: int, nullable: true}
    auto_cancel_stale: {type: bool, nullable: true}
    marker_timeout: {type: int, nullable: true}
    openaip:
      include: 'openaip_schema'
    auto_lifecycle:
      include: 'auto_lifecycle_schema'

type: map
func: check_main_structure
nullable: false
mapping:
  DEFAULT:
    include: 'element_schema'
  commands:
    include: 'commands_schema'
  chat_commands:
    include: 'chat_commands_schema'
  regex;(.+):
    include: 'element_schema'
